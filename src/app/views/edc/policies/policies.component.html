<div class="container">
  <div class="container_title">
    <div class="title_icon"></div>
    <span class="title_text"> Policy </span>
  </div>
  <div class="tool">
    <div class="search-tool">
      <input class="search_input" type="search" [(ngModel)]="searchText" placeholder="Search Catalog Browser"
        rel="search" />
      <!-- <button type="button" class="searchbtn" (click)="searchasset()"></button> -->
      <button type="submit" class="createbtn" (click)="mdOpen=true"></button>
    </div>
    <div class="cardgrid">
      <span class="list-btn" (click)="showCard(false)" (mouseenter)="mouseEnter('list')"
        (mouseleave)="mouseLeave('list')">
        <clr-icon [ngClass]="{ 'is-highlight': !isCardView || isHovering('list')}" shape="view-list"></clr-icon>
      </span>
      <span class="card-btn" (click)="showCard(true)" (mouseenter)="mouseEnter('card')"
        (mouseleave)="mouseLeave('card')">
        <clr-icon [ngClass]="{'is-highlight': isCardView || isHovering('card')}" shape="view-cards"></clr-icon>
      </span>
      <span class="filter-divider"></span>
      <span class="refresh-btn"><clr-icon class="refresh" shape="refresh" (click)="onrefresh()"></clr-icon></span>
    </div>
  </div>
  <div *ngIf="!isCardView">
    <div class="dataset_title">
      <clr-datagrid class="customgrid sengee" #cDataGrid [clrDgLoading]="cDataLoading" (clrDgRefresh)="getRequestPolicy()"
      data-detail-view="true" [clrDgRowSelection]="true" [(clrDgSingleSelected)]="cSelection">
      <clr-dg-column *ngFor="let header of columnDefs">{{header.headerName}}</clr-dg-column>
      <clr-dg-row *clrDgItems="let policy of policy | filter : searchText  index as i" [clrDgItem]="policy">
        <clr-dg-cell>{{i+1}}</clr-dg-cell>
        <clr-dg-cell>{{policy.id}}</clr-dg-cell>
        <clr-dg-cell>{{policy.createdAt| date : 'yyyy/MM/dd h:mm:ss a'}}</clr-dg-cell>
      </clr-dg-row>
      <clr-dg-placeholder>We couldn't find any Policy</clr-dg-placeholder>
      <clr-dg-footer>
        <clr-dg-pagination #pagination [clrDgPageSize]="10">
          {{pagination.firstItem + 1}} - {{pagination.lastItem + 1}} of {{pagination.totalItems}} Policy
          <clr-dg-page-size [clrPageSizeOptions]="[2,5,10]">Policy per page</clr-dg-page-size>
        </clr-dg-pagination>
      </clr-dg-footer>
    </clr-datagrid>
    </div>
  </div>
  <div class="data-area" *ngIf="isCardView">
  </div>

  <!-- Wizzard -->
  <clr-wizard #wizardmd [(clrWizardOpen)]="mdOpen" clrWizardSize="lg">
    <clr-wizard-title>STEP</clr-wizard-title>
    <clr-wizard-button [type]="'cancel'">Close</clr-wizard-button>
    <clr-wizard-button [type]="'previous'">Previous</clr-wizard-button>
    <clr-wizard-button [type]="'next'">Next</clr-wizard-button>
    <clr-wizard-button [type]="'finish'" (click)="create()">Create</clr-wizard-button>
    <clr-wizard-page>
      <ng-template clrPageTitle>Create New Policy</ng-template>
      <form #modalFrom="ngForm" class="clr-form clr-form-horizontal" (valuechange)="formValueChange($event)">
        <div class="clr-form-control" *ngFor="let item of isEditable?editForm:newForm">
          <label class="required clr-control-label"
            [ngClass]="item.require?'form-required':''">{{item.text?.toUpperCase()}}</label>
          <div class="clr-control-container" [class.clr-error]='item.require && getValidationState(item.name!)'>
            <div class="clr-input-wrapper">
              <input type="text" class="clr-input enrollment-input" required [pattern]="item.regex!"
              [maxlength]="item.max!" #usernameInput="ngModel" [name]="item.name!"
              [ngModel]="getFormModel(item.name!)" [id]="item.name!" size="30"
              (input)='handleValidation(item.name! , false) '
              [readOnly]="item.readonly == true">
              <clr-icon class="clr-validate-icon" shape="exclamation-circle"></clr-icon>
              <clr-control-error *ngIf='item.require &&  getValidationState(item.name!)'>
                Input Your {{item.text}}
                <ng-template [ngIf]="item?.placeholder !== undefined">
                  ( ex : {{item.placeholder}})
                </ng-template>
              </clr-control-error>
            </div>
          </div>
        </div>
      </form>
    </clr-wizard-page>
    <!-- <clr-wizard-page *ngFor="let policy of textform">
      <ng-template clrPageTitle>{{policy.text}}</ng-template> 
      <ng-template clrPageNavTitle>
        {{policy.text}}
      </ng-template>
      <form #modalFrom="ngForm" class="clr-form clr-form-horizontal" (valuechange)="formValueChange($event)">
        <section class="form-block">
          <input type="text" class="clr-input enrollment-input" required [pattern]="policy.regex!"
          [maxlength]="policy.max!" #usernameInput="ngModel" [name]="policy.name!"
          [ngModel]="getFormModel(policy.name!)" [id]="policy.name!" size="30"
          (input)='handleValidation(policy.name! , false) '
          [readOnly]="policy.readonly == true">
        </section>
      </form>
    </clr-wizard-page> -->
  </clr-wizard>